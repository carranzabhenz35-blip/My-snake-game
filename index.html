<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BHENZ SNAKE ULTRA</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    text-align:center;
    background:black;
    color:white;
    overflow:hidden;
}

canvas{
    background:rgba(0,0,0,0.85);
    border:4px solid #00ff99;
    border-radius:20px;
    box-shadow:0 0 30px #00ff99;
    width:90vw;
    max-width:420px;
    height:90vw;
    max-height:420px;
}

.banner{
    padding:15px;
}

.logo{
    width:55px;
    border-radius:50%;
    box-shadow:0 0 15px #00ff99;
}

h1{
    color:#00ff99;
    text-shadow:0 0 20px #00ff99;
    margin:5px 0;
}

.panel{
    font-size:14px;
}

#gameOver{
    position:fixed;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.9);
    display:none;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    z-index:10;
}
</style>
</head>

<body>

<div class="banner">
    <img src="logo.png" class="logo">
    <h1>BHENZ SNAKE ULTRA ðŸ‘‘</h1>
</div>

<div class="panel">
Score: <span id="score">0</span> |
High: <span id="highScore">0</span> |
Level: <span id="level">1</span>
</div>

<br>
<canvas id="game" width="420" height="420"></canvas>

<div id="gameOver">
<h2>ðŸ’€ GAME OVER</h2>
<p>Final Score: <span id="finalScore"></span></p>
<button onclick="startGame()">PLAY AGAIN</button>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

const box=21;
let snake,food,dir,score,level,speed,game;
let particles=[];
let highScore=localStorage.getItem("bhenzUltra")||0;
document.getElementById("highScore").innerText=highScore;

function startGame(){
snake=[{x:210,y:210}];
dir="RIGHT";
score=0;
level=1;
speed=120;
document.getElementById("score").innerText=score;
document.getElementById("level").innerText=level;
food=randomFood();
clearInterval(game);
document.getElementById("gameOver").style.display="none";
game=setInterval(draw,speed);
}

function randomFood(){
return{
x:Math.floor(Math.random()*20)*box,
y:Math.floor(Math.random()*20)*box
};
}

/* KEYBOARD */
document.addEventListener("keydown",e=>{
if(e.key==="ArrowUp"&&dir!=="DOWN")dir="UP";
if(e.key==="ArrowDown"&&dir!=="UP")dir="DOWN";
if(e.key==="ArrowLeft"&&dir!=="RIGHT")dir="LEFT";
if(e.key==="ArrowRight"&&dir!=="LEFT")dir="RIGHT";
});

/* SWIPE */
let sx=0,sy=0;
canvas.addEventListener("touchstart",e=>{
sx=e.touches[0].clientX;
sy=e.touches[0].clientY;
});
canvas.addEventListener("touchmove",e=>{
let dx=e.touches[0].clientX-sx;
let dy=e.touches[0].clientY-sy;
if(Math.abs(dx)>Math.abs(dy)){
if(dx>0&&dir!=="LEFT")dir="RIGHT";
else if(dx<0&&dir!=="RIGHT")dir="LEFT";
}else{
if(dy>0&&dir!=="UP")dir="DOWN";
else if(dy<0&&dir!=="DOWN")dir="UP";
}
});

/* SIMPLE SOUND */
function beep(freq){
let ctxAudio=new(window.AudioContext||window.webkitAudioContext)();
let osc=ctxAudio.createOscillator();
osc.type="square";
osc.frequency.value=freq;
osc.connect(ctxAudio.destination);
osc.start();
setTimeout(()=>{osc.stop();},80);
}

function draw(){
ctx.clearRect(0,0,420,420);

/* PARTICLES */
particles.push({x:snake[0].x+10,y:snake[0].y+10,life:20});
for(let i=0;i<particles.length;i++){
ctx.fillStyle="rgba(0,255,150,"+(particles[i].life/20)+")";
ctx.beginPath();
ctx.arc(particles[i].x,particles[i].y,5,0,Math.PI*2);
ctx.fill();
particles[i].life--;
}
particles=particles.filter(p=>p.life>0);

/* FOOD */
ctx.fillStyle="red";
ctx.shadowColor="red";
ctx.shadowBlur=20;
ctx.beginPath();
ctx.arc(food.x+10,food.y+10,8,0,Math.PI*2);
ctx.fill();
ctx.shadowBlur=0;

let headX=snake[0].x;
let headY=snake[0].y;

if(dir==="UP")headY-=box;
if(dir==="DOWN")headY+=box;
if(dir==="LEFT")headX-=box;
if(dir==="RIGHT")headX+=box;

/* WALL PASS */
if(headX<0)headX=399;
if(headX>=420)headX=0;
if(headY<0)headY=399;
if(headY>=420)headY=0;

/* COLLISION */
for(let i=0;i<snake.length;i++){
if(headX===snake[i].x&&headY===snake[i].y){
clearInterval(game);
beep(100);
document.getElementById("gameOver").style.display="flex";
document.getElementById("finalScore").innerText=score;
if(score>highScore){
highScore=score;
localStorage.setItem("bhenzUltra",highScore);
document.getElementById("highScore").innerText=highScore;
}
}
}

let newHead={x:headX,y:headY};

if(headX===food.x&&headY===food.y){
score++;
beep(400);
document.getElementById("score").innerText=score;

if(score%5===0){
level++;
speed-=10;
clearInterval(game);
game=setInterval(draw,speed);
document.getElementById("level").innerText=level;
}
food=randomFood();
}else{
snake.pop();
}

snake.unshift(newHead);

/* DRAW SNAKE */
for(let i=0;i<snake.length;i++){
let gradient=ctx.createLinearGradient(0,0,420,420);
gradient.addColorStop(0,"#00ff66");
gradient.addColorStop(1,"#009944");
ctx.fillStyle=gradient;
ctx.beginPath();
ctx.arc(snake[i].x+10,snake[i].y+10,10,0,Math.PI*2);
ctx.fill();
}

/* CROWN MODE */
if(level>=5){
ctx.font="30px Arial";
ctx.fillText("ðŸ‘‘",10,30);
}
}
</script>

</body>
</html>
